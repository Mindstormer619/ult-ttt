<input type="text" id="message-box">
<button onclick="extractAndSendMessage()">Send Message</button>

<div id="status-box"></div>

<script type="text/javascript">
    var gameUrl = "{{gameUrl}}";

    var socket = io('/game');

    socket.on('connect', function() {
        console.log('Connected!');
        socket.emit('gamecode', gameUrl);
    });
    socket.on('game-response', function(message) {
        console.log('Game response ' + message);
        statusBox.innerHTML = message;
    });
    socket.on('disconnect', function() {
        console.log('Disconnected');
        setTimeout(function() {
            window.location.href = '/'
        }, 5000);
    });

    socket.on('player-message', function(msgObj) {
        console.log(msgObj);
        statusBox.innerHTML += "\n<br><b> From " + msgObj.from + ":</b> " + msgObj.msg;
    });

    function sendMessage(msg) {
        socket.emit('message', msg);
    }

    msgBox = document.getElementById('message-box');
    statusBox = document.getElementById('status-box');

    function extractAndSendMessage() {
        sendMessage(msgBox.value);
        msgBox.value = '';
        msgBox.focus();
    }
</script>